(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{84:function(t,e,a){t.exports=a(99)},93:function(t,e,a){},94:function(t,e,a){},99:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),l=a(10),o=a(9),i=a(38),s=a(78),c=a(29),u={STARTDATE:"startDate",GRADUATED:"graduated",NUMSTUDENTS:"numStudents"},m={FIRSTNAME:"firstName",LASTNAME:"lastName",STOPLIGHTSTATUS:"stoplightStatus",TIMESINCETOUCHPOINT:"timeSinceTouchpoint",TIMESINCECOMMIT:"timeSinceCommit",GITHUB:"github"},d={FIRSTNAME:"firstName",LASTNAME:"lastName",STOPLIGHTSTATUS:"stoplightStatus",TIMESINCETOUCHPOINT:"timeSinceTouchpoint",TIMESINCECOMMIT:"timeSinceCommit",GITHUB:"github"},h={ALL:"all",ACTIVE:"active",INACTIVE:"inactive"},p={ALL:"all",ACTIVE:"active",INACTIVE:"inactive"},f={ALL:"all",ACTIVE:"active",INACTIVE:"inactive"},E={UP:"up",DOWN:"down"},g={UP:"up",DOWN:"down"},v={UP:"up",DOWN:"down"};function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(c.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={cohortSortFilter:"startDate",cohortHideFilter:"active",studentListSortFilter:"stoplightStatus",studentListHideFilter:"active",studentCardSortFilter:"stoplightStatus",studentCardHideFilter:"active",studentCardSortDirection:"up",studentListSortDirection:"up",cohortSortDirection:"up"};function T(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?T(a,!0).forEach((function(e){Object(c.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var O={accessToken:"",ctime:"",firstName:"",github:"",id:null,lastName:"",mtime:"",photoUrl:"",refreshToken:null,superuser:null},C=a(25);function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(a,!0).forEach((function(e){Object(c.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var D=[],j=Object(i.combineReducers)({user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0,a=N({},t);switch(e.type){case"UPDATE_USER":return console.log(e.payload),a=e.payload;case"LOGIN_USER":return a;case"LOGOUT_USER":return O;default:return a}},cohorts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0,a=Object(C.a)(t);switch(e.type){case"UPDATE_COHORTS":return a=e.payload;case"UPDATE_STUDENT":var n=e.student,r=[];return a.cohorts.forEach((function(t){var e=t.students.findIndex((function(t){return t.id===n.id}));if(e>=0){var a=I({},t);a.students[e]=n,r.push(a)}else r.push(t)})),r;case"ADD_STUDENT":var l=a.findIndex((function(t){return t.id===e.cohortId}));return a[l].students.push(e.student),a;case"ADD_TOUCHPOINT":var o=[];return a.forEach((function(t){var a=t.students.findIndex((function(t){return t.id===e.payload.studentId}));if(a>=0){var n=I({},t);n.students[a].touchpoints.push(e.payload.touchpointData),o.push(n)}else o.push(t)})),o;default:return a}},views:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0,a=S({},t);switch(e.type){case"COHORT_SORT_FILTER":return u[e.filter]?a.cohortSortFilter=u[e.filter]:a.cohortSortFilter=u.STARTDATE,a;case"STUDENT_LIST_SORT_FILTER":return d[e.filter]?a.studentListSortFilter=d[e.filter]:a.studentListSortFilter=d.NAME,a;case"STUDENT_CARD_SORT_FILTER":return m[e.filter]?a.studentCardSortFilter=m[e.filter]:a.studentCardSortFilter=m.NAME,a;case"COHORT_HIDE_FILTER":return h[e.filter]?a.cohortHideFilter=h[e.filter]:a.cohortHideFilter=h.ACTIVE,a;case"STUDENT_LIST_HIDE_FILTER":return f[e.filter]?a.studentListHideFilter=f[e.filter]:a.studentListHideFilter=f.ACTIVE,a;case"STUDENT_CARD_HIDE_FILTER":return p[e.filter]?a.studentCardHideFilter=p[e.filter]:a.studentCardHideFilter=p.ACTIVE,a;case"SET_COHORT_SORT_DIRECTION":return E[e.direction]?a.cohortSortDirection=E[e.direction]:a.cohortSortDirection=E.UP,a;case"SET_STUDENT_CARD_SORT_DIRECTION":return g[e.direction]?a.studentCardSortDirection=g[e.direction]:a.studentCardSortDirection=g.UP,a;case"SET_STUDENT_LIST_SORT_DIRECTION":return v[e.direction]?a.studentListSortDirection=v[e.direction]:a.studentListSortDirection=v.UP,a;default:return a}}}),L=Object(i.createStore)(j,Object(s.composeWithDevTools)()),x=(a(93),a(11)),k=a(12),F=a(15),U=a(13),_=a(14),A=a(28),P=a(37),R=(a(94),function(t){return{type:"UPDATE_USER",payload:t}}),H=a(54),M=function(t){function e(t){return Object(x.a)(this,e),Object(F.a)(this,Object(U.a)(e).call(this,t))}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(H.a,{variant:"primary",onClick:this.props.handleLogin},"Login With Github"))}}]),e}(n.Component),G=Object(P.o)(M),B=a(114),V=a(19),W=Object(o.b)((function(t){return{cohorts:t.cohorts,user:t.user}}))((function(t){var e=t.cohorts,a=t.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,a.id?r.a.createElement("div",null):r.a.createElement(A.Link,{to:"./auth/github"},r.a.createElement(H.a,{variant:"primary"},"Login With Github"))),r.a.createElement("div",{className:"container"},e&&e.length?r.a.createElement(B.a,null,r.a.createElement(B.a.Item,{as:"li",key:"header",variant:"secondary"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-7"},"Cohort"),r.a.createElement("div",{className:"col-sm-3"},"Start Date"),r.a.createElement("div",{className:"col-sm-1"},"Active"),r.a.createElement("div",{className:"col-sm-1"},"Students"))),e.map((function(t){return r.a.createElement(V.LinkContainer,{to:"/"+t.slug,key:t.slug},r.a.createElement(B.a.Item,{action:!0},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-7"},t.name),r.a.createElement("div",{className:"col-sm-3"},t.startDate),r.a.createElement("div",{className:"col-sm-1"},t.graduated?"\u274c":"\u2714"),r.a.createElement("div",{className:"col-sm-1"},t.students.length))))}))):r.a.createElement("div",null)))})),K=function(t){function e(){return Object(x.a)(this,e),Object(F.a)(this,Object(U.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(W,null))}}]),e}(n.Component),J=Object(P.o)(K),z=a(107),Y=a(108);a(97);var q=a(116),X=function(t){var e=t.stoplightStatus;return r.a.createElement(r.a.Fragment,null,function(){switch(e){case"green":return r.a.createElement("span",{className:"badge badge-pill badge-success"},r.a.createElement("i",{className:"material-icons pt-1 stoplight-badge"},"done"));case"yellow":return r.a.createElement("span",{className:"badge badge-pill badge-warning"},r.a.createElement("i",{className:"material-icons pt-1 stoplight-badge"},"help_outline"));case"red":return r.a.createElement("span",{className:"badge badge-pill badge-danger"},r.a.createElement("i",{className:"material-icons pt-1"},"warning"));default:return r.a.createElement("span",{className:"badge badge-pill badge-secondary"},r.a.createElement("i",{className:"material-icons pt-1"},"warning"))}}())},Q=function(t){var e=t.tagStatus,a=t.tagText;switch(e){case"green":return r.a.createElement("span",{className:"badge badge-success mr-auto my-1"},a);case"yellow":return r.a.createElement("span",{className:"badge badge-warning mr-auto my-1"},a);case"red":return r.a.createElement("span",{className:"badge badge-danger mr-auto my-1"},a)}},Z=a(113),$=a(101),tt=function(t){var e=t.commitDay,a=t.idx;return r.a.createElement(r.a.Fragment,null,a%7===0?r.a.createElement("div",{className:"graph-item graph-item-header"},"#"+(Math.floor(a/7)+1)):"",e.commits.length?r.a.createElement(Z.a,{key:"",placement:"bottom",overlay:r.a.createElement($.a,null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{align:"right"},"Commits:"),r.a.createElement("td",{align:"left",style:{paddingLeft:"5px"}},e.commits.length)),r.a.createElement("tr",null,r.a.createElement("td",{align:"right"},"Lines:"),r.a.createElement("td",{align:"left",style:{paddingLeft:"5px"}},e.total)),r.a.createElement("tr",null,r.a.createElement("td",{align:"right"},"Repos:"),r.a.createElement("td",{align:"left",style:{paddingLeft:"5px"}},e.repos?e.repos.length:0)))))},r.a.createElement("div",{className:"graph-item ".concat(e.commits.length<4?["no","sm","md","lg","xl"][e.commits.length]:"xl","-commits")})):r.a.createElement("div",{className:"graph-item no-commits"}))},et=function(t){var e=t.student;return r.a.createElement("div",{className:"graph-container"},["","","M","","W","","F",""].map((function(t,e){return r.a.createElement("div",{className:"graph-item graph-item-header",key:t+e},t)})),function(t,e){if(!t.length)return null;for(var a=new Date,n=a.getDay(),r=[],l=null,o=function(e){var n=(new Date).getTimezoneOffset(),o=Number(60*n*1e3),i={commits:[],repos:[],date:null,total:null,add:null,sub:null};t.forEach((function(t){t.ctime=new Date(t.ctime),t.ctime.getTime()<a.getTime()-864e5*e+o&&t.ctime.getTime()>a.getTime()-864e5*e-864e5+o&&(i.commits.push(t),i.repos.find((function(e){return e===t.repo}))||i.repos.push(t.repo),i.date=t.ctime.getDate(),i.total+=t.total,i.add+=t.added,i.sub+=t.deleted,l=t)})),r.push(i)},i=21+n;i>=0;i--)o(i);return{commits:r,lastCommit:l?at(l.ctime):null,commitCreated:l?l.ctime:null}}(e.commits).commits.map((function(t,e){return r.a.createElement(tt,{commitDay:t,idx:e,key:e})})))};function at(t){var e=new Date(t);if(!e)return"";var a=Math.floor((new Date-e)/1e3),n=Math.floor(a/31536e3);return n>1?n+" years":(n=Math.floor(a/2592e3))>1?n+" months":(n=Math.floor(a/86400))>1?n+" days":(n=Math.floor(a/3600))>1?n+" hours":(n=Math.floor(a/60))>1?n+" minutes":Math.floor(a)+" seconds"}var nt=a(110),rt=a(111),lt=a(102),ot=a(81),it=a(103),st=a(115),ct=a(82),ut=a(104),mt=a(105),dt=a(27),ht=a(106);function pt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ft(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?pt(a,!0).forEach((function(e){Object(c.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Et=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(F.a)(this,Object(U.a)(e).call(this,t))).handleOpen=function(){fetch("/api/students/".concat(a.props.studentId)).then((function(t){return t.json()})).then((function(t){t&&a.setState({currentTags:t.tags,stoplightStatusEntry:t.stoplightStatus,modalShow:!0})}))},a.handleClose=function(){a.setState({modalShow:!1,stoplightStatusEntry:"green",tagEntry:{text:"",status:"green"},currentTags:[],commentEntry:"",errors:{stoplightStatusEntry:null,tagEntry:null,currentTags:null,commentEntry:null}})},a.handleAddTouchpoint=function(){a.props.studentId;fetch("/api/touchpoints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ctime:new Date,student:a.props.studentId,stoplightStatus:a.state.stoplightStatusEntry,tags:JSON.stringify(a.state.currentTags),comment:a.state.commentEntry})}).then((function(t){return t.json()})).then((function(t){console.log(t),a.props.addTouchpoint({studentId:t.student,touchpointData:{id:t.id,ctime:t.ctime,student:t.student,stoplightStatus:t.stoplightStatus,comment:t.comment,user:a.props.user.id,userFirstName:a.props.user.firstName,userLastName:a.props.user.lastName,tags:t.tags}}),a.handleClose()})).catch((function(t){console.log(t)}))},a.handleAddTag=function(){a.setState({currentTags:a.state.currentTags?[].concat(Object(C.a)(a.state.currentTags),[ft({},a.state.tagEntry)]):[ft({},a.state.tagEntry)],tagEntry:{text:"",status:"green"}})},a.removeTag=function(t){a.setState({currentTags:a.state.currentTags.filter((function(e){return e.text!=t}))})},a.state={modalShow:!1,stoplightStatusEntry:"green",tagEntry:{text:"",status:"green"},currentTags:[],commentEntry:"",errors:{stoplightStatusEntry:null,tagEntry:null,currentTags:null,commentEntry:null}},a}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,this.props.isStudentCard?r.a.createElement("div",{className:"d-flex justify-content-center py-2 add-touchpoint-button"},r.a.createElement("a",{href:"#",onClick:this.handleOpen},"Add Touchpoint")):r.a.createElement(H.a,{variant:"primary",value:"addTouchpoint",onClick:this.handleOpen,className:"ml-auto btn-lg px-2 py-0 mb-2"},"\uff0b"),r.a.createElement(nt.a,{show:this.state.modalShow},r.a.createElement(nt.a.Header,{closeButton:!0},r.a.createElement(nt.a.Title,null,"Add Touchpoint...")),r.a.createElement(nt.a.Body,null,r.a.createElement(rt.a,null,r.a.createElement(lt.a,{className:"my-2"},r.a.createElement(rt.a.Group,{as:ot.a,sm:4,controlId:"inputGithub"},r.a.createElement(rt.a.Label,null,"Stoplight Status"),r.a.createElement(it.a,null,r.a.createElement(st.a,{className:"stoplightStatus",type:"radio",name:"stoplightButtons",value:this.state.stoplightStatusEntry,onChange:function(e){t.setState({stoplightStatusEntry:e})}},r.a.createElement(ct.a,{value:"green",variant:"success"},r.a.createElement("i",{className:"material-icons pt-1"},"done")),r.a.createElement(ct.a,{value:"yellow",variant:"warning"},r.a.createElement("i",{className:"material-icons pt-1"},"help_outline")),r.a.createElement(ct.a,{value:"red",variant:"danger"},r.a.createElement("i",{className:"material-icons pt-1"},"warning")))),r.a.createElement(rt.a.Control.Feedback,{type:"invalid"},this.state.errors.stoplightStatusEntry?this.state.errors.stoplightStatusEntry:"")),r.a.createElement(rt.a.Group,{as:ot.a,sm:8,controlId:"inputGithub"},r.a.createElement(rt.a.Label,null,"Github Profile"),r.a.createElement(ut.a,null,r.a.createElement(mt.a,{as:ut.a.Prepend,variant:"outline-"+bt(this.state.tagEntry.status),title:this.state.tagEntry.status},r.a.createElement(dt.a.Item,{eventKey:"green",onSelect:function(e){t.setState({tagEntry:ft({},t.state.tagEntry,{status:e})})}},"Green"),r.a.createElement(dt.a.Item,{eventKey:"yellow",onSelect:function(e){t.setState({tagEntry:ft({},t.state.tagEntry,{status:e})})}},"Yellow"),r.a.createElement(dt.a.Item,{eventKey:"red",onSelect:function(e){t.setState({tagEntry:ft({},t.state.tagEntry,{status:e})})}},"Red")),r.a.createElement(rt.a.Control,{type:"input",placeholder:"Add Tag",value:this.state.tagEntry.text,onChange:function(e){t.setState({tagEntry:ft({},t.state.tagEntry,{text:e.target.value})})},isValid:null!==this.state.errors.tagEntry,isInvalid:this.state.errors.tagEntry}),r.a.createElement(ut.a.Append,null,r.a.createElement(H.a,{size:"sm",variant:"outline-secondary",onClick:this.handleAddTag},"\uff0b"))),this.state.currentTags?this.state.currentTags.map((function(e){return r.a.createElement(ht.a,{key:e.text,id:e.text,variant:bt(e.status),className:"mr-auto my-1"},e.text,r.a.createElement("span",{className:"delete-tag linkstyle",onClick:function(e){t.removeTag(e.target.parentNode.parentNode.getAttribute("id"))}},r.a.createElement("i",{className:"material-icons"},"cancel")))})):r.a.createElement("div",null),r.a.createElement(rt.a.Control.Feedback,{type:"invalid"},this.state.errors.tagEntry?this.state.errors.tagEntry:""))),r.a.createElement(lt.a,{className:"my-2"},r.a.createElement(rt.a.Group,{as:ot.a,controlId:"inputFirstName"},r.a.createElement(rt.a.Label,null,"First Name"),r.a.createElement(rt.a.Control,{type:"textarea",placeholder:"Comments...",value:this.state.commentEntry,onChange:function(e){t.setState({commentEntry:e.target.value})},isValid:null!==this.state.errors.commentEntry,isInvalid:this.state.errors.commentEntry}))))),r.a.createElement(nt.a.Footer,null,r.a.createElement(H.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(H.a,{variant:"primary",onClick:this.handleAddTouchpoint},"Add Touchpoint"))))}}]),e}(r.a.Component),gt={addTouchpoint:function(t){return{type:"ADD_TOUCHPOINT",payload:{studentId:t.studentId,touchpointData:t.touchpointData}}}},vt=Object(o.b)(null,gt)(Et);function bt(t){var e="";switch(t){case"green":e="success";break;case"yellow":e="warning";break;case"red":e="danger";break;default:e="success"}return e}var St=function(t){var e=t.student,a=t.currentStoplightStatus;return r.a.createElement(V.LinkContainer,{to:"/students/"+e.github,exact:!0},r.a.createElement(q.a.Header,{className:"d-flex flex-row linkstyle"},r.a.createElement("div",null,r.a.createElement("img",{className:"student-photo",src:e.photoUrl?e.photoUrl:"/images/noPhoto.png",alt:"student photo"})),r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"d-flex flex-row justify-content-between stoplight-status-div"},r.a.createElement("h4",{className:"mx-2 student-name text-truncate"},e.firstName+" "+e.lastName),r.a.createElement(X,{stoplightStatus:a})),r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("img",{src:"/images/GitHub-Mark.png",style:{height:"25px"}}),r.a.createElement("a",{href:"https://github.com/"+e.github},e.github)))))},yt=function(t){var e=t.student,a=t.currentTouchpoint;return r.a.createElement(q.a.Body,{className:"d-flex flex-row student-info"},r.a.createElement(Tt,{student:e,currentTouchpoint:a}),r.a.createElement(Nt,{student:e}))},Tt=function(t){t.student;var e=t.currentTouchpoint;return r.a.createElement("div",{className:"d-flex flex-column student-touchpoint"},r.a.createElement("div",{className:"student-touchpoint-title"},"Last Touchpoint"),e&&e.comment?r.a.createElement("div",{className:"student-touchpoint-comment"},r.a.createElement("small",null,e.comment)):r.a.createElement("div",null),e&&e.tags?e.tags.map((function(t){return r.a.createElement(Q,{tagStatus:t.status,tagText:t.text,key:t.text})})):r.a.createElement("div",null),e?r.a.createElement("div",{className:"blockquote-footer touchpoint-date"},function(t){var e=new Date(t);if(!e)return"";var a=Math.floor((new Date-e)/1e3),n=Math.floor(a/31536e3);if(n>1)return n+" years";if((n=Math.floor(a/2592e3))>1)return n+" months";if((n=Math.floor(a/86400))>1)return n+" days";if((n=Math.floor(a/3600))>1)return n+" hours";if((n=Math.floor(a/60))>1)return n+" minutes";return Math.floor(a)+" seconds"}(e.ctime)+" ago by "+e.userFirstName+" "+e.userLastName," "):r.a.createElement("div",null))},Nt=function(t){var e=t.student;return r.a.createElement("div",{className:"d-flex flex-column student-commits"},r.a.createElement("div",{className:"student-touchpoint-title"},"Latest Commits"),e.commits&&e.commits.length?r.a.createElement(et,{student:e}):r.a.createElement("div",null))},Ot=function(t){var e=t.student,a=t.user;return r.a.createElement(q.a.Footer,{className:"d-flex flex-row student-card-footer p-0"},r.a.createElement("div",{className:"d-flex justify-content-center py-2"},r.a.createElement(V.LinkContainer,{to:"/students/"+e.github},r.a.createElement("a",{href:!0},"Details"))),r.a.createElement(vt,{user:a,studentId:e.id,isStudentCard:!0}))},Ct=Object(o.b)((function(t){return{user:t.user,cohorts:t.cohorts}}))((function(t){var e=t.cohorts,a=t.studentId,n=t.cohortId,l=t.user,o=e.filter((function(t){return t.id===n}))[0].students.filter((function(t){return t.id===a}))[0],i=o.touchpoints.sort((function(t,e){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()}))[0];return r.a.createElement(q.a,{className:o.enrolledStatus?"student-card":"student-card student-card-inactive"},r.a.createElement(St,{student:o,currentStoplightStatus:i?i.stoplightStatus:null}),r.a.createElement(yt,{student:o,currentTouchpoint:i}),r.a.createElement(Ot,{student:o,user:l}))}));var wt=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(F.a)(this,Object(U.a)(e).call(this,t))).handleStudentCardSortChange=function(t){"up"===t||"down"===t?a.props.setStudentCardSortDirection(t.toUpperCase()):a.props.setStudentCardSortFilter(t.toUpperCase())},a.handleStudentCardHideChange=function(t){a.props.setStudentCardHideFilter(t.toUpperCase())},a}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-row justify-content-between mx-2"},r.a.createElement("h2",null,this.props.currentCohort.name),r.a.createElement("div",{className:"sort-controls"},r.a.createElement("h6",null,"Sort:"),r.a.createElement(rt.a.Control,{as:"select",value:this.props.views.studentCardSortFilter,onChange:function(e){return t.handleStudentCardSortChange(e.target.value)}},r.a.createElement("option",{text:"Name",value:"firstName"},"Name"),r.a.createElement("option",{text:"Last Name",value:"lastName"}," Last Name"),r.a.createElement("option",{text:"Github Username",value:"github"}," Github Username"),r.a.createElement("option",{text:"Stoplight Status",value:"stoplightStatus"}," Stoplight Status"),r.a.createElement("option",{text:"Last Commit",value:"timeSinceCommit"}," Last Commit"),r.a.createElement("option",{text:"Last Touchpoint",value:"timeSinceTouchpoint"}," Last Touchpoint")),r.a.createElement(it.a,null,r.a.createElement(st.a,{type:"radio",name:"sortUpDownCard",value:this.props.views.studentCardSortDirection,onChange:this.handleStudentCardSortChange},r.a.createElement(ct.a,{value:"up",variant:"light"},"Up"),r.a.createElement(ct.a,{value:"down",variant:"light"},"Down"))),r.a.createElement("h6",null,"Show:"),r.a.createElement(it.a,null,r.a.createElement(st.a,{type:"radio",name:"hideStudentCard",value:this.props.views.studentCardHideFilter,onChange:this.handleStudentCardHideChange},r.a.createElement(ct.a,{value:"active",variant:"light"},"Active"),r.a.createElement(ct.a,{value:"inactive",variant:"light"},"Inactive"),r.a.createElement(ct.a,{value:"all",variant:"light"},"All"))))))}}]),e}(n.Component),It={setStudentCardSortFilter:function(t){return{type:"STUDENT_CARD_SORT_FILTER",filter:t}},setStudentCardHideFilter:function(t){return{type:"STUDENT_CARD_HIDE_FILTER",filter:t}},setStudentCardSortDirection:function(t){return{type:"SET_STUDENT_CARD_SORT_DIRECTION",direction:t}}},Dt=Object(o.b)((function(t){return{views:t.views}}),It)(wt),jt=Object(o.b)((function(t){var e=t.views,a=Lt(t),n=window.location.pathname.replace(/\W/g,""),r=a.length?a.filter((function(t){return t.slug==n})):[];return{views:e,currentCohort:r.length?r[0]:null}}))((function(t){var e=t.views,a=t.currentCohort;return r.a.createElement("div",null,a.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,{currentCohort:a}),r.a.createElement("div",{className:"d-flex flex-row flex-wrap student-cards"},a.students.map((function(t){return r.a.createElement(Ct,{studentId:t.id,cohortId:a.id,views:e,key:t.id})})))):r.a.createElement("div",null))})),Lt=function(t){var e=function(t,e){switch(t){case"firstName":return"up"===e?function(t,e){return(""+t.firstName).localeCompare(e.firstName)}:function(t,e){return(""+e.firstName).localeCompare(t.firstName)};case"lastName":return"up"===e?function(t,e){return(""+t.lastName).localeCompare(e.lastName)}:function(t,e){return(""+e.lastName).localeCompare(t.lastName)};case"github":return"up"===e?function(t,e){return(""+t.github).localeCompare(e.github)}:function(t,e){return(""+e.github).localeCompare(t.github)};case"timeSinceTouchpoint":return"up"===e?function(t,e){return xt(e.touchpoints)-xt(t.touchpoints)}:function(t,e){return xt(t.touchpoints)-xt(e.touchpoints)};case"timeSinceCommit":return"up"===e?function(t,e){return xt(e.commits)-xt(t.commits)}:function(t,e){return xt(t.commits)-xt(e.commits)};case"stoplightStatus":return"up"===e?function(t,e){return Ft(e.touchpoints)-Ft(t.touchpoints)}:function(t,e){return Ft(t.touchpoints)-Ft(e.touchpoints)};default:return function(t,e){return 0}}}(t.views.studentCardSortFilter,t.views.studentCardSortDirection),a=function(t){switch(t){case"all":return function(t){return!0};case"active":return function(t){return t.enrolledStatus};case"inactive":return function(t){return!t.enrolledStatus};case"default":return function(t){return!0}}}(t.views.studentCardHideFilter),n=Object(C.a)(t.cohorts),r=[];return n.forEach((function(t){t.students.sort(e).filter(a),r.push(t)})),r};function xt(t){var e=kt(t);return e?new Date(e.ctime).getTime():0}function kt(t){return t.length?t.sort((function(t,e){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()}))[0]:null}function Ft(t){var e=kt(t);switch(e?e.stoplightStatus:null){case"green":return 1;case"yellow":return 2;case"red":return 3;default:return 4}}function Ut(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function _t(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ut(a,!0).forEach((function(e){Object(c.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ut(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var At=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(F.a)(this,Object(U.a)(e).call(this,t))).handleGithubInput=function(t){a.state.githubLookupTimeout&&window.clearTimeout(a.state.githubLookupTimeout);var e=setTimeout(a.handleGithubApiCall,5e3);a.setState({githubInput:t.target.value,githubLookupTimeout:e})},a.handleGithubApiCall=function(){console.log("ToDo : github API call"),a.state.githubLookupTimeout&&window.clearTimeout(a.state.githubLookupTimeout),fetch("https://api.github.com/users/"+a.state.githubInput).then((function(t){return t.json()})).then((function(t){console.log(t),t.login?a.setState({errors:_t({},a.state.errors,{githubInput:!1})}):a.setState({firstnameInput:"",lastnameInput:"",photoUrl:"",errors:_t({},a.state.errors,{githubInput:"".concat(a.state.githubInput," is not a valid Github username")})}),t.avatar_url&&a.setState({photoUrl:t.avatar_url}),t.name&&a.setState({firstnameInput:t.name.split(" ").slice(0,1)[0],lastnameInput:t.name.split(" ").slice(1).join(" ")})})),a.setState({githubLookupTimeout:null})},a.handleOpen=function(){a.setState({modalShow:!0})},a.handleClose=function(){a.setState({githubInput:"",firstnameInput:"",lastnameInput:"",photoUrl:"",modalShow:!1})},a.handleAddStudent=function(){console.log("Todo: add student - ",a.state.githubInput,a.state.firstnameInput,a.state.lastnameInput,a.state.photoUrl),fetch("/api/students",{method:"POST",body:JSON.stringify({cohort:a.props.cohort.id,firstName:a.state.firstnameInput,lastName:a.state.lastnameInput,github:a.state.githubInput,photoUrl:a.state.photoUrl,enrolledStatus:!0}),headers:{"Content-Type":"application/json"}}).then((function(t){if(200===t.status)return console.log("success"),t.json();console.log("ERRORRRORRR - ",t)})).then((function(t){a.props.addStudent({cohortId:a.props.cohort.id,student:{id:t.studentId,ctime:new Date,mtime:new Date,firstName:t.firstName,lastName:t.lastName,github:t.github,photoUrl:t.photoUrl,enrolledStatus:!0,touchpoints:[],commits:[]}}),a.handleClose()})).catch((function(t){400===t.status?t.json().then((function(t){console.log(t),window.alert("Student failed to add! \n".concat(t.errors.map((function(t){return t.field+": "+t.error+"\n"})).join("")))})):(console.log("error adding student - ",t),window.alert("Server error"))}))},a.state={githubInput:"",firstnameInput:"",lastnameInput:"",photoUrl:"",modalShow:!1,githubLookupTimeout:null,errors:{githubInput:null,firstnameInput:null,lastnameInput:null}},a}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{variant:"primary",value:"addStudent",onClick:this.handleOpen,className:"ml-auto btn-lg px-2 py-0 mb-2"},"\uff0b"),r.a.createElement(nt.a,{show:this.state.modalShow},r.a.createElement(nt.a.Header,{closeButton:!0},r.a.createElement(nt.a.Title,null,"Add Student...")),r.a.createElement(nt.a.Body,null,r.a.createElement(rt.a,null,r.a.createElement(lt.a,{className:"my-2"},r.a.createElement(ot.a,{sm:2,className:"ml-1 px-0"},r.a.createElement("img",{src:this.state.photoUrl?this.state.photoUrl:"/images/noPhoto.png",style:{width:"100%"}})),r.a.createElement(rt.a.Group,{as:ot.a,controlId:"inputGithub"},r.a.createElement(rt.a.Label,null,"Github Profile"),r.a.createElement(rt.a.Control,{type:"input",placeholder:"Github Username",value:this.state.githubInput,onChange:this.handleGithubInput,onBlur:this.handleGithubApiCall,isValid:null!==this.state.errors.githubInput,isInvalid:this.state.errors.githubInput}),r.a.createElement(rt.a.Control.Feedback,{type:"invalid"},this.state.errors.githubInput?this.state.errors.githubInput:"")),r.a.createElement(ot.a,{className:"pt-3"},r.a.createElement("small",null,"Just the username, not the whole URL"))),r.a.createElement(lt.a,{className:"my-2"},r.a.createElement(rt.a.Group,{as:ot.a,controlId:"inputFirstName"},r.a.createElement(rt.a.Label,null,"First Name"),r.a.createElement(rt.a.Control,{type:"input",placeholder:"First Name",value:this.state.firstnameInput,onChange:function(e){t.setState({firstnameInput:e.target.value})},isValid:null!==this.state.errors.firstnameInput,isInvalid:this.state.errors.firstnameInput})),r.a.createElement(rt.a.Group,{as:ot.a,controlId:"inputLastName"},r.a.createElement(rt.a.Label,null,"First Name"),r.a.createElement(rt.a.Control,{type:"input",placeholder:"Last Name",value:this.state.lastnameInput,onChange:function(e){t.setState({lastnameInput:e.target.value})},isValid:null!==this.state.errors.lastnameInput,isInvalid:this.state.errors.lastnameInput}))))),r.a.createElement(nt.a.Footer,null,r.a.createElement(H.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(H.a,{variant:"primary",onClick:this.handleAddStudent},"Save Changes"))))}}]),e}(r.a.Component),Pt={addStudent:function(t){return{type:"ADD_STUDENT",cohortId:t.cohortId,student:t.student}}},Rt=Object(o.b)(null,Pt)(At),Ht=function(t){function e(){var t,a;Object(x.a)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(F.a)(this,(t=Object(U.a)(e)).call.apply(t,[this].concat(r)))).handleSortClick=function(t){t.preventDefault();var e=t.target.getAttribute("sort_type");if(e)if(a.props.views.studentListSortFilter===e){var n="up"===a.props.views.studentListSortDirection?"down":"up";a.props.setStudentListSortDirection(n.toUpperCase())}else a.props.setStudentListSortFilter(e.toUpperCase())},a}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(B.a.Item,{variant:"secondary"},r.a.createElement(lt.a,null,r.a.createElement(ot.a,{xs:1,onClick:function(e){t.handleSortClick(e)}},r.a.createElement("h6",{sort_type:"stoplightStatus",className:"linkstyle d-flex flex-row"},"Status ","stoplightStatus"===this.props.views.studentListSortFilter?r.a.createElement(ht.a,{variant:"light",className:"ml-2"},"up"===this.props.views.studentListSortDirection?"\u25b2":"\u25bc"):r.a.createElement("span",null))),r.a.createElement(ot.a,{xs:5,onClick:function(e){t.handleSortClick(e)}},r.a.createElement("h6",{sort_type:"firstName",className:"linkstyle d-flex flex-row"},"Name ","firstName"===this.props.views.studentListSortFilter?r.a.createElement(ht.a,{variant:"light",className:"ml-2"},"up"===this.props.views.studentListSortDirection?"\u25b2":"\u25bc"):r.a.createElement("span",null))),r.a.createElement(ot.a,{xs:2,onClick:function(e){t.handleSortClick(e)}},r.a.createElement("h6",{sort_type:"timeSinceTouchpoint",className:"linkstyle d-flex flex-row"},"Last Touchpoint ","timeSinceTouchpoint"===this.props.views.studentListSortFilter?r.a.createElement(ht.a,{variant:"light",className:"ml-2"},"up"===this.props.views.studentListSortDirection?"\u25b2":"\u25bc"):r.a.createElement("span",null))),r.a.createElement(ot.a,{xs:2,onClick:function(e){t.handleSortClick(e)}},r.a.createElement("h6",{sort_type:"timeSinceCommit",className:"linkstyle d-flex flex-row"},"Last Commit ","timeSinceCommit"===this.props.views.studentListSortFilter?r.a.createElement(ht.a,{variant:"light",className:"ml-2"},"up"===this.props.views.studentListSortDirection?"\u25b2":"\u25bc"):r.a.createElement("span",null))),r.a.createElement(ot.a,{xs:1,onClick:function(e){t.handleSortClick(e)}},r.a.createElement("h6",{sort_type:"github",className:"linkstyle d-flex flex-row"},"Active ","github"===this.props.views.studentListSortFilter?r.a.createElement(ht.a,{variant:"light",className:"ml-2"},"up"===this.props.views.studentListSortDirection?"\u25b2":"\u25bc"):r.a.createElement("span",null))),r.a.createElement(ot.a,{xs:1})))}}]),e}(r.a.Component),Mt=function(t){var e=t.currentCohort;return r.a.createElement(r.a.Fragment,null,e.students.map((function(t){var e=t.touchpoints.sort((function(t,e){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()}))[0],a=t.commits.sort((function(t,e){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()}))[0];return r.a.createElement(V.LinkContainer,{to:"/students/"+t.github,key:t.id},r.a.createElement(B.a.Item,{action:!0},r.a.createElement(lt.a,null,r.a.createElement(ot.a,{xs:1},r.a.createElement(X,{stoplightStatus:e?e.stoplightStatus:null})),r.a.createElement(ot.a,{xs:5},t.firstName+" "+t.lastName),r.a.createElement(ot.a,{xs:2},e?qt(e.ctime):""),r.a.createElement(ot.a,{xs:2},a?qt(a.ctime):""),r.a.createElement(ot.a,{xs:1},t.enrolledStatus?"Y":"N"),r.a.createElement(ot.a,{xs:1},r.a.createElement(H.a,{variant:"danger",value:t.id,onClick:Bt},"X")))))})))},Gt=function(t){function e(){return Object(x.a)(this,e),Object(F.a)(this,Object(U.a)(e).apply(this,arguments))}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){var t=Kt(this.props.cohorts,this.props.views),e=window.location.pathname.replace(/\W/g,""),a=t.length?t.filter((function(t){return t.slug===e})):[],n=a.length?a[0]:null;return r.a.createElement("div",null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-lg"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("h2",null,n.name),r.a.createElement(Rt,{cohort:n})),r.a.createElement(B.a,null,r.a.createElement(Ht,this.props),r.a.createElement(Mt,{currentCohort:n})))):r.a.createElement("div",null,"Nothing Here..."))}}]),e}(r.a.Component),Bt=function(t){t.preventDefault(),t.stopPropagation();var e=t.target.value;console.log("Todo: delete student ",e)},Vt={setStudentListSortFilter:function(t){return{type:"STUDENT_LIST_SORT_FILTER",filter:t}},setStudentListHideFilter:function(t){return{type:"STUDENT_LIST_HIDE_FILTER",filter:t}},setStudentListSortDirection:function(t){return{type:"SET_STUDENT_LIST_SORT_DIRECTION",direction:t}}},Wt=Object(o.b)((function(t){return{views:t.views,cohorts:t.cohorts}}),Vt)(Gt),Kt=function(t,e){var a=function(t,e){switch(t){case"firstName":return"up"===e?function(t,e){return(""+t.firstName).localeCompare(e.firstName)}:function(t,e){return(""+e.firstName).localeCompare(t.firstName)};case"lastName":return"up"===e?function(t,e){return(""+t.lastName).localeCompare(e.lastName)}:function(t,e){return(""+e.lastName).localeCompare(t.lastName)};case"github":return"up"===e?function(t,e){return(""+t.github).localeCompare(e.github)}:function(t,e){return(""+e.github).localeCompare(t.github)};case"timeSinceTouchpoint":return"up"===e?function(t,e){return Jt(e.touchpoints)-Jt(t.touchpoints)}:function(t,e){return Jt(t.touchpoints)-Jt(e.touchpoints)};case"timeSinceCommit":return"up"===e?function(t,e){return Jt(e.commits)-Jt(t.commits)}:function(t,e){return Jt(t.commits)-Jt(e.commits)};case"stoplightStatus":return"up"===e?function(t,e){return Yt(e.touchpoints)-Yt(t.touchpoints)}:function(t,e){return Yt(t.touchpoints)-Yt(e.touchpoints)};default:return function(t,e){return 0}}}(e.studentListSortFilter,e.studentListSortDirection),n=function(t){switch(t){case"all":return function(t){return!0};case"active":return function(t){return t.enrolledStatus};case"inactive":return function(t){return!t.enrolledStatus};case"default":return function(t){return!0}}}(e.studentListHideFilter),r=Object(C.a)(t),l=[];return r.forEach((function(t){t.students.sort(a).filter(n),l.push(t)})),l};function Jt(t){var e=zt(t);return e?new Date(e.ctime).getTime():0}function zt(t){return t.length?t.sort((function(t,e){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()}))[0]:null}function Yt(t){var e=zt(t);switch(e?e.stoplightStatus:null){case"green":return 1;case"yellow":return 2;case"red":return 3;default:return 4}}function qt(t){var e=new Date(t);if(!e)return"";var a=Math.floor((new Date-e)/1e3),n=Math.floor(a/31536e3);return n>1?n+" years":(n=Math.floor(a/2592e3))>1?n+" months":(n=Math.floor(a/86400))>1?n+" days":(n=Math.floor(a/3600))>1?n+" hours":(n=Math.floor(a/60))>1?n+" minutes":Math.floor(a)+" seconds"}var Xt=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(F.a)(this,Object(U.a)(e).call(this,t))).state={currentTab:"studentCards"},a}return Object(_.a)(e,t),Object(k.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,this.props.user.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{activeKey:this.state.currentTab,onSelect:function(e){return t.setState({currentTab:e})}},r.a.createElement(Y.a,{eventKey:"studentCards",title:"Dashboard"},r.a.createElement(jt,null)),r.a.createElement(Y.a,{eventKey:"studentList",title:"Students"},r.a.createElement(Wt,null)),r.a.createElement(Y.a,{eventKey:"cohortSettings",title:"Settings"}))):r.a.createElement("h2",null,"Nothing here..."))}}]),e}(r.a.Component),Qt=Object(o.b)((function(t){return{user:t.user}}))(Xt),Zt=Object(o.b)((function(t){return{cohorts:t.cohorts,user:t.user}}))((function(t){var e=t.cohorts,a=t.user,n=window.location.pathname.split(/[/ ]+/).pop(),l=[];e.forEach((function(t){t.students.forEach((function(t){l.push(t)}))}));var o=l.filter((function(t){return t.github===n}))[0],i=o.touchpoints.sort((function(t,e){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()}))[0];i&&i.stoplightStatus;return r.a.createElement(r.a.Fragment,null,o&&a.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,o.firstName+" "+o.lastName)):r.a.createElement("h2",null,"Nothing here..."))})),$t=a(112),te=a(83),ee=a(109),ae=Object(o.b)((function(t){return{user:t.user}}))((function(t){var e=t.user;return r.a.createElement(r.a.Fragment,null,e.id?r.a.createElement($t.a,{bg:"light",expand:"lg",style:{marginBottom:"20px"}},r.a.createElement(V.IndexLinkContainer,{to:"/"},r.a.createElement($t.a.Brand,null,"Headmaster II")),r.a.createElement($t.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement($t.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(te.a,{className:"ml-auto"},r.a.createElement(ee.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"mr-2",src:e.photoUrl,style:{height:"30px",width:"30px",borderRadius:"50%"}}),e.firstName),id:"basic-nav-dropdown"},r.a.createElement(V.IndexLinkContainer,{to:"/"},r.a.createElement(ee.a.Item,null,"Home")),r.a.createElement(V.LinkContainer,{to:"/cohorts"},r.a.createElement(ee.a.Item,null,"Cohorts")),r.a.createElement(ee.a.Divider,null),r.a.createElement(V.LinkContainer,{to:"/logout"},r.a.createElement(ee.a.Item,null,"Logout")))))):r.a.createElement($t.a,{bg:"light",expand:"lg",style:{marginBottom:"20px"}},r.a.createElement(V.IndexLinkContainer,{to:"/"},r.a.createElement($t.a.Brand,null,"Headmaster II")),r.a.createElement($t.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement($t.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(te.a,{className:"ml-auto"},r.a.createElement(V.IndexLinkContainer,{to:"/"},r.a.createElement(te.a.Link,null,"Home")),r.a.createElement(V.LinkContainer,{to:"/auth/github"},r.a.createElement(te.a.Link,null,r.a.createElement("div",{className:"d-flex flex-row align-items-center linkstyle"},r.a.createElement("img",{className:"mr-2",src:"./images/GitHub-mark.png",style:{height:"30px",width:"30px"}}),r.a.createElement("p",{className:"my-0 py-0"}," Login with Github"))))))))})),ne={accessToken:"",ctime:"",firstName:"",github:"",id:null,lastName:"",mtime:"",photoUrl:"",refreshToken:null,superuser:null},re=function(t){function e(t){var a;return Object(x.a)(this,e),(a=Object(F.a)(this,Object(U.a)(e).call(this,t))).handleLogin=function(){var t=window.prompt("Please enter your github username","prphntm63");fetch("https://api.github.com/users/"+t).then((function(t){return t.json()})).then((function(e){e.login||window.alert("".concat(t," is not a valid Github username"));var a={id:t,github:t,superuser:"superadmin"};return e.avatar_url&&(a.photoUrl=e.avatar_url),e.name&&(a.firstName=e.name.split(" ").slice(0,1)[0],a.lastName=e.name.split(" ").slice(1).join(" ")),a})).then((function(t){if(!t)return null;a.setState({user:{firstName:t.firstName,lastName:t.lastName,github:t.githHub,superuser:t.superadmin,photoUrl:t.photoUrl}}),L.dispatch(R(t))}))},a.handleLogout=function(){window.location.href="http://localhost:5000/logout",L.dispatch(R(ne)),a.setState({user:null}),console.log("Logout")},a.state={user:null},a}return Object(_.a)(e,t),Object(k.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=function(){var t=window.location.href.split("?")[1];return console.log(t),window.location.href="http://localhost:5000/auth/github/callback?".concat(t),r.a.createElement("div",null)},a=function(){window.location.href="http://localhost:5000/auth/github",console.log("Auth Call")};return r.a.createElement((function(){return r.a.createElement(A.BrowserRouter,null,r.a.createElement(ae,null),r.a.createElement(P.g,null,r.a.createElement(P.d,{exact:!0,path:"/"},t.state.user?r.a.createElement(J,null):r.a.createElement(G,{handleLogin:t.handleLogin})),r.a.createElement(P.d,{path:"/auth/github",render:a,exact:!0}),r.a.createElement(P.d,{path:"/auth/github/callback",render:e,exact:!0}),r.a.createElement(P.d,{path:"/logout",render:t.handleLogout,exact:!0}),r.a.createElement(P.d,{path:"/students/*"},t.state.user?r.a.createElement(Zt,null):r.a.createElement(P.c,{to:""})),r.a.createElement(P.d,{path:"/*"},t.state.user?r.a.createElement(Qt,null):r.a.createElement(P.c,{to:""}))))}),null)}}]),e}(n.Component);Object(l.render)(r.a.createElement(o.a,{store:L},r.a.createElement(re,null)),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.0e55ca58.chunk.js.map